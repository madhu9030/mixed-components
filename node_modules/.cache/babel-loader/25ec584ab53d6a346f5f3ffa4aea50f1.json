{"ast":null,"code":"import _regeneratorRuntime from\"/Users/madhusudanreddysanaiahgari/Documents/Todo-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/madhusudanreddysanaiahgari/Documents/Todo-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/madhusudanreddysanaiahgari/Documents/Todo-App/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Weather from\"./weather.jsx\";function WeatherEngine(props){var intialSearch=props.intialSearch;var _useState=useState(intialSearch),_useState2=_slicedToArray(_useState,2),search=_useState2[0],searchCity=_useState2[1];var _useState3=useState(intialSearch),_useState4=_slicedToArray(_useState3,2),childSearch=_useState4[0],childSearchCity=_useState4[1];var _useState5=useState({temp:\"\",type:\"\",country:\"\",feelsLike:\"\",city:\"\",id:\"\",error:\"\"}),_useState6=_slicedToArray(_useState5,2),weather=_useState6[0],setWeather=_useState6[1];// get the child Component input search value\nvar getChildInputValue=function getChildInputValue(getValue){childSearchCity(getValue);};// get data using Promiseses\nfunction updatePromise(e){var promise=new Promise(function(reslove,reject){reslove(fetch(\"http://api.timezonedb.com/v2.1/get-time-zone?key=P75QOPRLSKVS&format=json&by=zone&zone=America/\".concat(childSearch)).then(function(response){return response.json();}).catch(function(e){return e;}));});promise.then(function(result){console.log(result);});}{/* Make API call using Promise */}var getWeather=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(q){var checkUserValue,checkCharPattern,checkNumPattern,checkPatteren,apiRes,resJson;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://console.log(isNaN(search))\ncheckCharPattern=/[1-9]/g;checkNumPattern=/[a-z, A-Z]/gi;checkPatteren=search.match(checkCharPattern)&&search.match(checkNumPattern);if(isNaN(search)){checkUserValue=\"q=\".concat(search);}else{checkUserValue=\"zip=\".concat(search);}_context.next=6;return fetch(\"http://api.openweathermap.org/data/2.5/weather?\".concat(checkUserValue,\"&units=metric&APPID=e04a7cbcb82de0f319fb66a3e5d643fe\"));case 6:apiRes=_context.sent;_context.next=9;return apiRes.json();case 9:resJson=_context.sent;return _context.abrupt(\"return\",resJson);case 11:case\"end\":return _context.stop();}}},_callee);}));return function getWeather(_x){return _ref.apply(this,arguments);};}();// Update the weather each time user search\nvar updateweather=function updateweather(search){getWeather(search).then(function(res){var dateBuilder=function dateBuilder(timezone){var nowInLocalTime=Date.now()+1000*(timezone/3600);var millitime=new Date(nowInLocalTime);var dateFormat=millitime.toLocaleString();var day=millitime.toLocaleString(\"en-IN\",{weekday:\"long\"});var month=millitime.toLocaleString(\"en-IN\",{month:\"long\"});var date=millitime.toLocaleString(\"en-IN\",{day:\"numeric\"});var year=millitime.toLocaleString(\"en-IN\",{year:\"numeric\"});var hours=millitime.toLocaleString(\"en-IN\",{hour:\"numeric\"});var minutes=millitime.toLocaleString(\"en-IN\",{minute:\"numeric\"});return\"\".concat(day,\" \").concat(date,\" \").concat(month,\" \").concat(year,\" \").concat(hours,\":\").concat(minutes);};// console.log(res, dateBuilder(19800));\nreturn res.main?setWeather({temp:res.main.temp,type:res.weather[0][\"main\"],country:res.sys.country,feelsLike:res.main.feels_like,city:res.name,id:res.id}):setWeather({error:res.message});});};// OnClick of search button this function calls updateweather method and return new data\nvar handleSearch=function handleSearch(event){event.preventDefault();updateweather(search);};// It will  execute only onload to update default search\nuseEffect(function(){updateweather(intialSearch);},[intialSearch]);var inputFocus=function inputFocus(e){if(e.target.value!==\"\"){e.target.classList.value=\"focused\";}};var id=\"search-\".concat(Math.random()*3);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"App fade-in\"},/*#__PURE__*/React.createElement(\"form\",{className:\"search\"},/*#__PURE__*/React.createElement(\"input\",{id:id,onFocus:function onFocus(e){return inputFocus(e);},type:\"text\",value:search,onChange:function onChange(e){return searchCity(e.target.value);},className:search?\"focused\":\"\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:id},\"Zipcode or City\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return handleSearch(e);}},\"Search\")),/*#__PURE__*/React.createElement(Weather,{temp:weather.temp,type:weather.type,city:weather.city,country:weather.country,feelsLike:weather.feelsLike,id:weather.id,error:weather.error,childChange:getChildInputValue,clickBack:updatePromise,inputValue:childSearch})));}export default WeatherEngine;","map":{"version":3,"sources":["/Users/madhusudanreddysanaiahgari/Documents/Todo-App/src/weather/weatherEngine.jsx"],"names":["React","useState","useEffect","Weather","WeatherEngine","props","intialSearch","search","searchCity","childSearch","childSearchCity","temp","type","country","feelsLike","city","id","error","weather","setWeather","getChildInputValue","getValue","updatePromise","e","promise","Promise","reslove","reject","fetch","then","response","json","catch","result","console","log","getWeather","q","checkCharPattern","checkNumPattern","checkPatteren","match","isNaN","checkUserValue","apiRes","resJson","updateweather","res","dateBuilder","timezone","nowInLocalTime","Date","now","millitime","dateFormat","toLocaleString","day","weekday","month","date","year","hours","hour","minutes","minute","main","sys","feels_like","name","message","handleSearch","event","preventDefault","inputFocus","target","value","classList","Math","random"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Weather from \"./weather.jsx\";\n\nfunction WeatherEngine(props) {\n  const intialSearch = props.intialSearch;\n  const [search, searchCity] = useState(intialSearch);\n  const [childSearch, childSearchCity] = useState(intialSearch);\n  const [weather, setWeather] = useState({\n    temp: \"\",\n    type: \"\",\n    country: \"\",\n    feelsLike: \"\",\n    city: \"\",\n    id: \"\",\n    error: \"\",\n  });\n\n  // get the child Component input search value\n  const getChildInputValue = (getValue) => {\n    childSearchCity(getValue);\n  };\n\n  // get data using Promiseses\n  function updatePromise(e) {\n    const promise = new Promise((reslove, reject) => {\n      reslove(\n        fetch(\n          `http://api.timezonedb.com/v2.1/get-time-zone?key=P75QOPRLSKVS&format=json&by=zone&zone=America/${childSearch}`\n        )\n          .then((response) => {\n            return response.json();\n          })\n          .catch((e) => e)\n      );\n    });\n    promise.then((result) => {\n      console.log(result);\n    });\n  }\n\n  {\n    /* Make API call using Promise */\n  }\n\n  const getWeather = async (q) => {\n    //console.log(isNaN(search))\n    let checkUserValue;\n    const checkCharPattern = /[1-9]/g;\n    const checkNumPattern = /[a-z, A-Z]/gi;\n    const checkPatteren =\n      search.match(checkCharPattern) && search.match(checkNumPattern);\n\n    if (isNaN(search)) {\n      checkUserValue = `q=${search}`;\n    } else {\n      checkUserValue = `zip=${search}`;\n    }\n    const apiRes = await fetch(\n      `http://api.openweathermap.org/data/2.5/weather?${checkUserValue}&units=metric&APPID=e04a7cbcb82de0f319fb66a3e5d643fe`\n    );\n    const resJson = await apiRes.json();\n    return resJson;\n  };\n\n  // Update the weather each time user search\n  const updateweather = (search) => {\n    getWeather(search).then((res) => {\n      const dateBuilder = (timezone) => {\n        const nowInLocalTime = Date.now() + 1000 * (timezone / 3600);\n        const millitime = new Date(nowInLocalTime);\n        const dateFormat = millitime.toLocaleString();\n\n        let day = millitime.toLocaleString(\"en-IN\", { weekday: \"long\" });\n        let month = millitime.toLocaleString(\"en-IN\", { month: \"long\" });\n        let date = millitime.toLocaleString(\"en-IN\", { day: \"numeric\" });\n        let year = millitime.toLocaleString(\"en-IN\", { year: \"numeric\" });\n        let hours = millitime.toLocaleString(\"en-IN\", { hour: \"numeric\" });\n        let minutes = millitime.toLocaleString(\"en-IN\", { minute: \"numeric\" });\n\n        return `${day} ${date} ${month} ${year} ${hours}:${minutes}`;\n      };\n      // console.log(res, dateBuilder(19800));\n      return res.main\n        ? setWeather({\n            temp: res.main.temp,\n            type: res.weather[0][\"main\"],\n            country: res.sys.country,\n            feelsLike: res.main.feels_like,\n            city: res.name,\n            id: res.id,\n          })\n        : setWeather({\n            error: res.message,\n          });\n    });\n  };\n\n  // OnClick of search button this function calls updateweather method and return new data\n  const handleSearch = (event) => {\n    event.preventDefault();\n    updateweather(search);\n  };\n\n  // It will  execute only onload to update default search\n  useEffect(() => {\n    updateweather(intialSearch);\n  }, [intialSearch]);\n  const inputFocus = (e) => {\n    if (e.target.value !== \"\") {\n      e.target.classList.value = \"focused\";\n    }\n  };\n  const id = `search-${Math.random() * 3}`;\n  return (\n    <div>\n      <div className=\"App fade-in\">\n        <form className=\"search\">\n          <input\n            id={id}\n            onFocus={(e) => inputFocus(e)}\n            type=\"text\"\n            value={search}\n            onChange={(e) => searchCity(e.target.value)}\n            className={search ? \"focused\" : \"\"}\n          />\n          <label htmlFor={id}>Zipcode or City</label>\n          <button onClick={(e) => handleSearch(e)}>Search</button>\n        </form>\n        <Weather\n          temp={weather.temp}\n          type={weather.type}\n          city={weather.city}\n          country={weather.country}\n          feelsLike={weather.feelsLike}\n          id={weather.id}\n          error={weather.error}\n          childChange={getChildInputValue}\n          clickBack={updatePromise}\n          inputValue={childSearch}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default WeatherEngine;\n"]},"metadata":{},"sourceType":"module"}